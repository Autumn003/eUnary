{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "file-upload",
  "type": "registry:ui",
  "title": "File Upload",
  "author": "Hemant Sharma <hemant.develop@gmail.com>",
  "description": "A file upload component with drag-and-drop support.",
  "dependencies": [
    "class-variance-authority",
    "motion",
    "clsx",
    "tailwind-merge",
    "react-dropzone",
    "@tabler/icons-react"
  ],
  "files": [
    {
      "path": "../docs/components/ui/file-upload.tsx",
      "content": "'use client';\n\nimport { useState } from 'react';\nimport { AnimatePresence, motion } from 'motion/react';\nimport { cn } from '@/lib/utils';\nimport { useDropzone } from 'react-dropzone';\nimport { IconArrowBarDown, IconX } from '@tabler/icons-react';\n\nconst mainVariant = {\n    initial: {\n        x: 0,\n        y: 0,\n        scale: 1,\n        opacity: 1,\n    },\n    animate: {\n        x: 15,\n        y: -15,\n        scale: 1.1,\n        opacity: 0.9,\n    },\n};\n\nconst childVariant = {\n    initial: {\n        y: 0,\n        scale: 1,\n        opacity: 1,\n    },\n    animate: {\n        y: -3,\n        scale: 1.05,\n        opacity: 0.8,\n    },\n};\n\nconst parentVariant = {\n    initial: {},\n    animate: {\n        transition: {\n            staggerChildren: 0.1,\n            delayChildren: 0.2,\n        },\n    },\n};\n\nconst secondaryVariant = {\n    initial: {\n        opacity: 0,\n        scale: 0.9,\n        y: -10,\n    },\n    animate: {\n        opacity: 1,\n        scale: 1,\n        y: 0,\n        transition: {\n            duration: 0.3,\n            ease: 'easeInOut',\n        },\n    },\n    exit: {\n        opacity: 0,\n        scale: 0.9,\n        y: -10,\n        transition: {\n            duration: 0.3,\n            ease: 'easeInOut',\n        },\n    },\n};\n\nexport const FileUpload = ({\n    onChange,\n    multiple = false,\n}: {\n    onChange?: (files: File[]) => void;\n    multiple?: boolean;\n}) => {\n    const customMaskStyle = {\n        '--r': '10px', // the radius\n        '--s': '10px', // size of inner curve\n        '--x': '30px', // horizontal offset (no percentage)\n        '--y': '0.1px', // vertical offset (no percentage)\n        '--_m': '/calc(2*var(--r)) calc(2*var(--r)) radial-gradient(#000 70%,#0000 72%)',\n        '--_g': 'conic-gradient(at calc(100% - var(--r)) var(--r),#0000 25%,#000 0)',\n        '--_d': '(var(--s) + var(--r))',\n        mask: `calc(100% - var(--_d) - var(--x)) 0 var(--_m),\n           100% calc(var(--_d) + var(--y)) var(--_m),\n           radial-gradient(var(--s) at 100% 0,#0000 99%,#000 calc(100% + 1px))\n            calc(-1*var(--r) - var(--x)) calc(var(--r) + var(--y)),\n           var(--_g) calc(-1*var(--_d) - var(--x)) 0,\n           var(--_g) 0 calc(var(--_d) + var(--y))`,\n        maskRepeat: 'no-repeat',\n    };\n\n    const [selectedFiles, setSelectedFiles] = useState<File[]>([]);\n    const [removingFile, setRemovingFile] = useState<string | null>(null);\n\n    const handleFileChange = (newFiles: File[]) => {\n        const updatedFiles = multiple\n            ? [...selectedFiles, ...newFiles]\n            : newFiles;\n        setSelectedFiles(updatedFiles);\n\n        onChange && onChange(newFiles);\n    };\n\n    const handleRemoveFile = (file: File, event: React.MouseEvent) => {\n        event.stopPropagation();\n        event.preventDefault();\n\n        setRemovingFile(file.name);\n        // Remove the file after animation completes\n        setTimeout(() => {\n            const updatedFiles = selectedFiles.filter(\n                (f) => f.name !== file.name\n            );\n            setSelectedFiles(updatedFiles);\n            setRemovingFile(null);\n            onChange && onChange(updatedFiles);\n        }, 300);\n    };\n\n    const { getRootProps, getInputProps, isDragActive } = useDropzone({\n        multiple,\n        onDrop: handleFileChange,\n        onDropRejected: (error) => {\n            console.log(error);\n        },\n    });\n\n    return (\n        <div className=\"w-full\" {...getRootProps()}>\n            <motion.div\n                className=\"group relative block w-full cursor-pointer overflow-hidden rounded-lg border border-dashed border-neutral-300 dark:border-neutral-700\"\n                initial=\"initial\"\n                whileHover=\"animate\"\n            >\n                <input {...getInputProps()} />\n                <div className=\"absolute inset-0 [mask-image:radial-gradient(ellipse_at_center,white,transparent)]\">\n                    <GridPattern />\n                </div>\n                <div className=\"relative mx-auto flex h-full w-full max-w-xl flex-col items-center p-10\">\n                    <div className=\"my-10 flex flex-col items-center justify-center text-center\">\n                        <p className=\"relative font-sans text-base font-bold text-neutral-700 dark:text-neutral-300\">\n                            Upload file\n                        </p>\n                        <p className=\"relative mt-2 font-sans text-base font-normal text-neutral-400 dark:text-neutral-400\">\n                            Click or just drag & drop your files here\n                        </p>\n                    </div>\n                    <AnimatePresence mode=\"popLayout\">\n                        {selectedFiles.length > 0 && (\n                            <div className=\"no-scrollbar max-h-96 w-full overflow-y-auto\">\n                                {selectedFiles.map((file, idx) => (\n                                    <motion.div\n                                        key={file.name + idx}\n                                        initial=\"initial\"\n                                        animate={\n                                            removingFile === file.name\n                                                ? 'exit'\n                                                : 'animate'\n                                        }\n                                        exit=\"exit\"\n                                        variants={secondaryVariant}\n                                        layout\n                                        className={cn(\n                                            'relative z-40 mx-auto mt-4 flex w-full flex-col items-start justify-start overflow-hidden rounded-xl bg-white p-4 inset-shadow-sm inset-shadow-neutral-200 md:h-24 dark:bg-neutral-900 dark:inset-shadow-neutral-700',\n                                            'shadow-sm'\n                                        )}\n                                    >\n                                        <div className=\"flex w-full items-center justify-between gap-4\">\n                                            <motion.p\n                                                initial={{ opacity: 0 }}\n                                                animate={{ opacity: 1 }}\n                                                layout\n                                                className=\"max-w-xs truncate text-base text-neutral-700 dark:text-neutral-300\"\n                                            >\n                                                {file.name}\n                                            </motion.p>\n                                            <button>\n                                                <motion.p\n                                                    initial={{ opacity: 0 }}\n                                                    animate={{ opacity: 1 }}\n                                                    layout\n                                                    className=\"rounded-lg bg-neutral-100 px-1 py-1 text-sm text-neutral-600 dark:bg-neutral-800 dark:text-white\"\n                                                    onClick={(e) =>\n                                                        handleRemoveFile(\n                                                            file,\n                                                            e\n                                                        )\n                                                    }\n                                                >\n                                                    <IconX className=\"h-4 w-4\" />\n                                                </motion.p>\n                                            </button>\n                                        </div>\n\n                                        <div className=\"mt-2 flex w-full flex-col items-start justify-between gap-2 text-sm text-neutral-600 md:flex-row md:items-center dark:text-neutral-400\">\n                                            <div className=\"flex items-center gap-2 text-xs\">\n                                                <motion.p\n                                                    initial={{ opacity: 0 }}\n                                                    animate={{ opacity: 1 }}\n                                                    layout\n                                                    className=\"rounded-md border border-dashed border-neutral-300 px-1 py-0.5 dark:border-neutral-600\"\n                                                >\n                                                    {file.type}\n                                                </motion.p>\n\n                                                <motion.p\n                                                    initial={{ opacity: 0 }}\n                                                    animate={{ opacity: 1 }}\n                                                    layout\n                                                    className=\"rounded-md border border-dashed border-neutral-300 px-1 py-0.5 dark:border-neutral-600\"\n                                                >\n                                                    {(\n                                                        file.size /\n                                                        (1024 * 1024)\n                                                    ).toFixed(2)}{' '}\n                                                    MB\n                                                </motion.p>\n                                            </div>\n                                            <motion.p\n                                                initial={{ opacity: 0 }}\n                                                animate={{ opacity: 1 }}\n                                                layout\n                                            >\n                                                modified:{' '}\n                                                {new Date(file.lastModified)\n                                                    .toLocaleDateString(\n                                                        'en-GB',\n                                                        {\n                                                            day: '2-digit',\n                                                            month: 'short',\n                                                            year: 'numeric',\n                                                        }\n                                                    )\n                                                    .replace(/\\//g, ' ')\n                                                    .replace(/,/g, ',')}\n                                            </motion.p>\n                                        </div>\n                                    </motion.div>\n                                ))}\n                            </div>\n                        )}\n                    </AnimatePresence>\n                    {!selectedFiles.length && (\n                        <div className=\"transition-discrete duration-200 group-hover:drop-shadow-[0px_10px_25px_rgba(35,228,255,0.15)]\">\n                            <motion.div\n                                variants={mainVariant}\n                                transition={{\n                                    type: 'spring',\n                                    stiffness: 300,\n                                    damping: 20,\n                                }}\n                                className=\"relative flex h-28 w-32 justify-center rounded-xl bg-neutral-100 inset-shadow-sm inset-shadow-neutral-200 dark:bg-neutral-900 dark:inset-shadow-neutral-600\"\n                                style={customMaskStyle}\n                            >\n                                <motion.div\n                                    variants={parentVariant}\n                                    className=\"absolute inset-0 flex items-center justify-center\"\n                                >\n                                    <motion.div\n                                        variants={childVariant}\n                                        className=\"absolute bottom-0 mx-1 h-20 w-26 rounded-lg bg-sky-200 dark:bg-cyan-700\"\n                                    />\n                                    <motion.div\n                                        variants={childVariant}\n                                        className=\"absolute bottom-0 mx-1 h-18 w-28 rounded-lg bg-cyan-200 dark:bg-cyan-400\"\n                                    />\n                                </motion.div>\n                                <div className=\"absolute bottom-0 h-16 w-full rounded-xl bg-neutral-100 inset-shadow-sm inset-shadow-neutral-200 dark:bg-neutral-800 dark:inset-shadow-neutral-600\">\n                                    {isDragActive && (\n                                        <motion.p\n                                            initial={{ opacity: 0 }}\n                                            animate={{ opacity: 1 }}\n                                            className=\"flex h-full flex-col items-center justify-center text-sm text-neutral-600\"\n                                        >\n                                            Drop\n                                            <IconArrowBarDown className=\"h-4 w-4\" />\n                                        </motion.p>\n                                    )}\n                                </div>\n                            </motion.div>\n                        </div>\n                    )}\n                </div>\n            </motion.div>\n        </div>\n    );\n};\n\nexport function GridPattern() {\n    const columns = 41;\n    const rows = 11;\n    return (\n        <div className=\"flex shrink-0 scale-105 flex-wrap items-center justify-center gap-px bg-gray-100 dark:bg-neutral-900\">\n            {Array.from({ length: rows }).map((_, row) =>\n                Array.from({ length: columns }).map((_, col) => {\n                    const index = row * columns + col;\n                    return (\n                        <div\n                            key={`${col}-${row}`}\n                            className={`flex h-10 w-10 shrink-0 rounded-[2px] ${\n                                index % 2 === 0\n                                    ? 'bg-gray-50 dark:bg-neutral-950'\n                                    : 'bg-gray-50 shadow-[0px_0px_1px_3px_rgba(255,255,255,1)_inset] dark:bg-neutral-950 dark:shadow-[0px_0px_1px_3px_rgba(0,0,0,1)_inset]'\n                            }`}\n                        />\n                    );\n                })\n            )}\n        </div>\n    );\n}\n",
      "type": "registry:ui",
      "target": "components/ui/file-upload.tsx"
    }
  ]
}